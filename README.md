# subtitle-generator

**subtitle-generator** ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Python/Django –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏–∑ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é OpenAI Whisper API –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∞—É–¥–∏–æ—Ç—Ä–µ–∫–æ–≤.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ (mp3, wav –∏ –¥—Ä.) –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ –Ω–∞ –≤–æ–∫–∞–ª –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª —á–µ—Ä–µ–∑ Demucs (–∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (.srt) –∏–∑ –≤–æ–∫–∞–ª–∞ —Å –ø–æ–º–æ—â—å—é OpenAI Whisper API
- –ü—Ä–æ—Å–º–æ—Ç—Ä, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–∞—è —Ä–∞–∑–¥–∞—á–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTTP Range-–∑–∞–ø—Ä–æ—Å–æ–≤
- Docker- –∏ Docker Compose-–æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

---

## ‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/atBuba/subtitle-generator.git
cd subtitle-generator
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –∏ –ø—Ä–æ–ø–∏—à–∏—Ç–µ –≤–∞—à–∏ API-–∫–ª—é—á–∏:
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ OPENAI_API_KEY –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, DEMUCS_API_KEY

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:
docker-compose up --build
```

–î–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:8000

### 3. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `OPENAI_API_KEY` ‚Äî –≤–∞—à OpenAI API –∫–ª—é—á
- `DEMUCS_API_KEY` ‚Äî (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è)

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `subtitle_generator/`
  - `manage.py` ‚Äî Django entrypoint
  - `subtitle_generator/` ‚Äî –∫–æ–Ω—Ñ–∏–≥–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - `subtitle_generator_app/`
    - `models.py` ‚Äî –º–æ–¥–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
    - `views.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è, –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
    - `forms.py` ‚Äî Django —Ñ–æ—Ä–º—ã
    - `ranged_file_response.py` ‚Äî –æ—Ç–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Range
    - `services/` ‚Äî –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å audio separation –∏ Whisper
    - `templates/` ‚Äî HTML-—à–∞–±–ª–æ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

---

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.
2. –ñ–¥–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ—è–≤–ª–µ–Ω–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤.
3. –°–∫–∞—á–∞–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ .srt –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∞—É–¥–∏–æ.

---

## üß© –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Python 3.11, Django 5.2, openai>=2.8, docker, requests
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω—ã –≤ `requirements.txt` –∏ `docker-requirements.txt`

---

## üí° –°–æ–≤–µ—Ç—ã

- –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ DEBUG.
- –í—Å–µ –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã–µ –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ volume, –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- –†–∞–∑–¥–∞—á–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π middleware –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—Ä–∏–º–º–∏–Ω–≥–∞.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- –¢–µ—Å—Ç—ã –¥–ª—è range-–∑–∞–ø—Ä–æ—Å–æ–≤ –ª–µ–∂–∞—Ç –≤ `test_range_requests.py`
- –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `tests.py`

---

## üìÉ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

## üõ†Ô∏è TODO

- –î–æ–±–∞–≤–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (Celery)
- –°–¥–µ–ª–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –≤—Å–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞
- –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –∞–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å—Ç–∏–ª—å ‚Äî —Å–æ–æ–±—â–∏!
